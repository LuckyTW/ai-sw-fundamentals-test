# 리눅스 시스템 보안 및 관제 기초 설정

## 개요
당신은 신규 리눅스 서버의 기본 보안 설정 및 관제 시스템을 구축하는 임무를 맡았습니다.
주어진 체크리스트에 따라 시스템을 설정하고, 설정이 올바르게 되었는지 검증하는 Python 스크립트를 작성하세요.

**난이도**: ⭐ (15분 소요)
**합격 기준**: 70점 이상
**제출물**: 실제 시스템 설정 (채점 시스템이 자동 검증)

---

## 미션 체크리스트

### 1. SSH 보안 설정 (30점)
- [ ] SSH 포트를 기본 22번에서 **20022번**으로 변경
- [ ] Root 계정 SSH 로그인을 **완전히 차단** (PermitRootLogin no)

**주의사항**:
- `PermitRootLogin prohibit-password`는 불합격 처리됩니다 (AI 함정!)
- 설정 변경 후 SSH 서비스를 재시작해야 합니다

### 2. 방화벽 설정 (20점)
- [ ] UFW 방화벽이 활성화되어 있음
- [ ] 20022번 포트(SSH)가 허용되어 있음
- [ ] 80번 포트(HTTP)가 허용되어 있음
- [ ] 443번 포트(HTTPS)가 허용되어 있음

### 3. 계정 관리 (20점)
- [ ] `agent-admin` 계정이 존재함
- [ ] `agent-dev` 계정이 존재함
- [ ] `agent-common` 그룹이 존재하고, agent-admin과 agent-dev가 모두 속해 있음

**주의사항**:
- 계정 생성 시 홈 디렉토리가 자동 생성되어야 합니다 (`-m` 옵션)
- 기본 쉘은 `/bin/bash`로 설정하세요

### 4. 관제 스크립트 작성 (30점)
- [ ] `/opt/monitor.sh` 스크립트가 존재함
- [ ] 스크립트는 실행 권한(755)을 가짐

**출력 형식 예시** (참고용, 실제로는 권한만 검증):
```bash
#!/bin/bash
# 프로세스 수
echo "[PROCESS] Total: $(ps aux | wc -l)"
# SSH 포트 확인
echo "[PORT] SSH(20022): LISTENING"
# 디스크 사용량
echo "[DISK] Usage: $(df -h / | tail -1 | awk '{print $5}')"
# 메모리 사용량
echo "[MEMORY] Usage: $(free | grep Mem | awk '{printf \"%.0f%%\", $3/$2 * 100}')"
```

---

## 제출 형식

시스템 설정을 완료하면 자동으로 채점됩니다. 별도의 파일 제출은 필요하지 않습니다.

---

## 힌트

1. SSH 설정은 `/etc/ssh/sshd_config` 파일에 있습니다
2. UFW 상태는 `ufw status` 명령어로 확인 가능합니다
3. 계정 정보는 `/etc/passwd`, `/etc/group` 파일을 확인하세요
4. 스크립트 권한은 `ls -l` 명령으로 확인 가능합니다

**제한 사항**:
- 표준 리눅스 명령어 사용 가능
- AI 도구를 자유롭게 활용하되, 결과를 반드시 검증하세요

---

## 평가 기준

| 항목 | 배점 |
|------|------|
| SSH 보안 설정 | 30점 |
| 방화벽 설정 | 20점 |
| 계정 관리 | 20점 |
| 관제 스크립트 | 30점 |
| **총점** | **100점** |

**합격 기준**: 70점 이상

---

**제출 기한**: 15분
**질문**: AI 어시스턴트에게 도움을 요청할 수 있지만, 최종 검증은 스스로 수행해야 합니다.
